# üóìÔ∏è Scheduler Microservice

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ **FastAPI**, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º —Ä–∞–±–æ—Ç–Ω–∏–∫–∞.
–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è—Ö –∏ –∑–∞–Ω—è—Ç—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–∞—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST-API –¥–ª—è:

* –ü–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö **–∑–∞–Ω—è—Ç—ã—Ö** –ø—Ä–æ–º–µ–∂—É—Ç–∫–æ–≤ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É
* –ü–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö **—Å–≤–æ–±–æ–¥–Ω—ã—Ö** –ø—Ä–æ–º–µ–∂—É—Ç–∫–æ–≤
* –ü—Ä–æ–≤–µ—Ä–∫–∏ **–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
* –ü–æ–∏—Å–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –∑–∞–¥–∞–Ω–Ω–æ–π **–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
* **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** –¥–∞–Ω–Ω—ã—Ö —Å –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

---

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* Python **3.6+**
* Docker & Docker Compose

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   ```bash
   git clone https://github.com/h45hc47/scheduler_service.git
   cd scheduler-service
   ```
2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

   ```
   SCHEDULE_URL={URL}
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

   ```
   docker-compose up -d
   ```
---

## üîå –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è     | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
| -------------- | ----------------------------------------------------------------- |
| `SCHEDULE_URL` | URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ JSON —Å –¥–∞–Ω–Ω—ã–º–∏ –æ —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è—Ö –∏ —Å–ª–æ—Ç–∞—Ö |

---

## üìë API Endpoints

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å            | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã                                           | –û–ø–∏—Å–∞–Ω–∏–µ                                               |
| ----- | --------------- | --------------------------------------------------- | ------------------------------------------------------ |
| GET   | `/busy_slots`   | `date=YYYY-MM-DD`                                   | –°–ø–∏—Å–æ–∫ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –¥–∞—Ç—É                          |
| GET   | `/free_slots`   | `date=YYYY-MM-DD`                                   | –°–ø–∏—Å–æ–∫ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –Ω–∞ –¥–∞—Ç—É                        |
| GET   | `/is_available` | `date=YYYY-MM-DD`,<br>`start=HH:MM`,<br>`end=HH:MM` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞               |
| GET   | `/find_slot`    | `duration_minutes=N`                                | –ü–µ—Ä–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π —Å–ª–æ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ N –º–∏–Ω—É—Ç             |
| POST  | `/update`       | (–Ω–µ—Ç)                                               | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ |

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤:**

```bash
# –ó–∞–Ω—è—Ç—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ 2025-02-15
curl "http://localhost:8000/busy_slots?date=2025-02-15"

# –°–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–∞ 2025-02-15
curl "http://localhost:8000/free_slots?date=2025-02-15"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ 10:00‚Äì10:30
curl "http://localhost:8000/is_available?date=2025-02-15&start=10:00&end=10:30"

# –ü–æ–∏—Å–∫ —Å–ª–æ—Ç–∞ –Ω–∞ 90 –º–∏–Ω—É—Ç
curl "http://localhost:8000/find_slot?duration_minutes=90"

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
curl -X POST "http://localhost:8000/update"
```

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–§–∞–π–ª —Å —é–Ω–∏—Ç-—Ç–µ—Å—Ç–∞–º–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `tests/test_scheduler.py`.
–ó–∞–ø—É—Å–∫:

```bash
docker-compose run --rm scheduler python -m unittest discover -s tests
```

---
